
-- CREACIÓN DE LA bd
-- =============================================


CREATE USER TUTOR IDENTIFIED BY oracle;

GRANT CONNECT,RESOURCE,DBA TO TUTOR;
GRANT CREATE SESSION  TO TUTOR;
grant create table to TUTOR;
grant create view, create procedure, create sequence to TUTOR;

--DROP TABLE TUTOR.NIVEL;
CREATE TABLE TUTOR.NIVEL (
       COD_NIVEL        CHAR(5) NOT NULL PRIMARY KEY,
       DES_NIVEL   VARCHAR2(30) not null
);

--DROP TABLE TUTOR.PROFESOR;
CREATE TABLE TUTOR.PROFESOR (
       COD_PROFESOR         char(5) NOT NULL PRIMARY KEY,
       NOM_PROFESOR       VARCHAR2(30)  null,
       APE_PROFESOR         VARCHAR2(30)  null,
       TEL_PROFESOR        char(15) NULL,
       EMAIL_PROFESOR      VARCHAR2(30)  null
);

--DROP TABLE TUTOR.CURSO;
CREATE TABLE TUTOR.CURSO (
       COD_CURSO              CHAR(5) NOT NULL PRIMARY KEY,
       NOM_CURSO         VARCHAR2(30) null,
       COD_NIVEL            char(5) NULL
);


ALTER TABLE TUTOR.CURSO
       ADD FOREIGN KEY (COD_NIVEL)
                             REFERENCES TUTOR.NIVEL;

--DROP TABLE TUTOR.SECCION;
CREATE TABLE TUTOR.SECCION(
       COD_SECCION CHAR(5) NOT NULL PRIMARY KEY,
       NOM_SECCION VARCHAR2(30) NOT NULL,
       COD_PROFESOR CHAR(5) NOT NULL,
       COD_NIVEL CHAR(5)
);

ALTER TABLE TUTOR.SECCION
       ADD FOREIGN KEY (COD_PROFESOR)
                             REFERENCES TUTOR.PROFESOR;
ALTER TABLE TUTOR.SECCION
       ADD FOREIGN KEY (COD_NIVEL)
                             REFERENCES TUTOR.NIVEL;

--DROP TABLE TUTOR.ALUMNO;
CREATE TABLE TUTOR.ALUMNO (
       COD_ALUMNO           char(5)  NULL PRIMARY KEY,
       SEX_ALUMNO          VARCHAR2(30)  null,
       NOM_ALUMNO       VARCHAR2(30)  null,
       APE_ALUMNO     VARCHAR2(30)  null,
       DIR_ALUMNO         VARCHAR2(30)  null,
       FEC_NACIMIENTO     DATE NULL,
       TEL_ALUMNO        VARCHAR2(30)  null,
       DIS_ALUMNO             VARCHAR2(30)  null,
       EMAIL_APODERADO        VARCHAR2(100) NULL,
       COD_SECCION             CHAR(5) NOT NULL       
);

ALTER TABLE TUTOR.ALUMNO
       ADD FOREIGN KEY (COD_SECCION)
                             REFERENCES TUTOR.SECCION;
                                                          

--DROP TABLE TUTOR.NOTA;
CREATE TABLE TUTOR.NOTA (
       COD_NOTA CHAR(5) NOT NULL PRIMARY KEY,
       NOTA1 DECIMAL(5,2),
       NOTA2 DECIMAL(5,2),
       NOTA3 DECIMAL(5,2),
       PROMEDIO DECIMAL(5,2),
       COD_ALUMNO char(5) NULL,
       COD_CURSO      char(5)null
);

ALTER TABLE TUTOR.NOTA
       ADD FOREIGN KEY (COD_CURSO)
                             REFERENCES TUTOR.CURSO;
ALTER TABLE TUTOR.NOTA
       ADD FOREIGN KEY (COD_ALUMNO)
                             REFERENCES TUTOR.ALUMNO;
 


--DROP TABLE TUTOR.PLANRECUPERACION;
CREATE TABLE TUTOR.PLANRECUPERACION(
    COD_PLAN   CHAR(5) NOT NULL PRIMARY KEY,
    COD_PROFESOR   CHAR(5) NOT NULL,
    COD_ALUMNO     CHAR(5) NOT NULL,
    COD_CURSO      CHAR(5) NOT NULL,
    COD_SECCION    CHAR(5) NOT NULL,
    DESCRIPCION    VARCHAR2(50) not null,
    CHK_REFORZAMIENTO     CHAR(1),
    CHK_TRABAJO           CHAR(1),
    FEC_REGISTRO           Date NOT NULL
);

ALTER TABLE TUTOR.PLANRECUPERACION
       ADD FOREIGN KEY (COD_ALUMNO)
                             REFERENCES TUTOR.ALUMNO;
ALTER TABLE TUTOR.PLANRECUPERACION
       ADD FOREIGN KEY (COD_PROFESOR)
                             REFERENCES TUTOR.PROFESOR;
ALTER TABLE TUTOR.PLANRECUPERACION
       ADD FOREIGN KEY (COD_SECCION)
                             REFERENCES TUTOR.SECCION;
ALTER TABLE TUTOR.PLANRECUPERACION
       ADD FOREIGN KEY (COD_CURSO)
                             REFERENCES TUTOR.CURSO;

--DROP TABLE TUTOR.REFORZAMIENTO;
CREATE TABLE TUTOR.REFORZAMIENTO (
       COD_REFORZAMIENTO char(5) NOT NULL,
       COD_PLAN CHAR(5),
       HOR_INICIO varchar(10),
       HOR_FIN varchar(10),
       DIA int,
       DURACION int,
       FEC_INICIO TIMESTAMP,
       OBJETIVO varchar(200) NULL,
       OBSERVACION varchar(200) NULL,
       COD_ALUMNO char(5) NOT NULL,
       COD_PROFESOR char(5) NOT NULL,
       COD_SECCION char(5)  NULL,
       COD_CURSO char(5) NOT null,
       FEC_GRABACION TIMESTAMP
);

ALTER TABLE TUTOR.REFORZAMIENTO
       ADD FOREIGN KEY (COD_PLAN)
                             REFERENCES TUTOR.PLANRECUPERACION;

ALTER TABLE TUTOR.REFORZAMIENTO
       ADD FOREIGN KEY (COD_ALUMNO)
                             REFERENCES TUTOR.ALUMNO;
ALTER TABLE TUTOR.REFORZAMIENTO
       ADD FOREIGN KEY (COD_PROFESOR)
                             REFERENCES TUTOR.PROFESOR;
ALTER TABLE TUTOR.REFORZAMIENTO
       ADD FOREIGN KEY (COD_SECCION)
                             REFERENCES TUTOR.SECCION;
ALTER TABLE TUTOR.REFORZAMIENTO
       ADD FOREIGN KEY (COD_CURSO)
                             REFERENCES TUTOR.CURSO;


--DROP TABLE TUTOR.TRABAJO;
CREATE TABLE TUTOR.TRABAJO (
       COD_TRABAJO CHAR(5) NOT NULL PRIMARY KEY,
       COD_PLAN CHAR(5),
       NOTA_TRABAJO DECIMAL(5,2),
       OBSERVACION varchar(100) NULL,
       COD_ALUMNO char(5) NOT NULL,
       COD_PROFESOR char(5) NOT NULL,
       COD_SECCION char(5)  NULL,
       COD_CURSO char(5) NOT null,
       FEC_GRABACION TIMESTAMP
);

CREATE TABLE TUTOR.NotasReforzamiento (
       COD_REFORZAMIENTO char(5) NULL,
	   COD_TRABAJO char(5) NULL,
       NOTA_1 decimal(5,2),
       NOTA_2 decimal(5,2),
       NOTA_3 decimal(5,2),
       PROMEDIO_REFORZAMIENTO decimal(5,2),
       tipo_nota  varchar2(40)null,
       detalle_reforzamiento varchar2(40) null);

ALTER TABLE TUTOR.TRABAJO
       ADD FOREIGN KEY (COD_PLAN)
                             REFERENCES TUTOR.PLANRECUPERACION;
                             
ALTER TABLE TUTOR.TRABAJO
       ADD FOREIGN KEY (COD_ALUMNO)
                             REFERENCES TUTOR.ALUMNO;
ALTER TABLE TUTOR.TRABAJO
       ADD FOREIGN KEY (COD_PROFESOR)
                             REFERENCES TUTOR.PROFESOR;
ALTER TABLE TUTOR.TRABAJO
       ADD FOREIGN KEY (COD_SECCION)
                             REFERENCES TUTOR.SECCION;
ALTER TABLE TUTOR.TRABAJO
       ADD FOREIGN KEY (COD_CURSO)
                             REFERENCES TUTOR.CURSO;




--========================================================================================0

--NIVEL
INSERT INTO TUTOR.NIVEL VALUES('00001','PRIMARIA');
INSERT INTO TUTOR.NIVEL VALUES('00002','SECUNDARIA');
COMMIT;

--PROFESOR
INSERT INTO TUTOR.PROFESOR VALUES('00001','MARIO','ALVAREZ FLORES','3889685','MALVAREZ@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00002','ALICIA','PEREZ URIBE','3889685','APEREZ@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00003','JESUS','VEGA CARRILLO','3889685','JVEGA@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00004','ADRIAN','QUIROZ FLORES','3889685','AQUIROZ@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00005','JULIO','RAMOS FLORES','3889685','JRAMOS@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00006','JULIA','VELASQUEZ FARFAN','3889685','JVEAZQUEZ@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00007','EMILIO','RISSO ORTIZ','3889685','ERISSO@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00008','TOMAS','AVILA FLORES','3889685','TAVILA@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00009','MARIA','NUÑEZ FLORES','3889685','MNUÑEZ@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00010','DIEGO','DELGADO FLORES','3889685','DDELGADO@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00011','FELIX','SALES ORTIZ','3889685','FSALES@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00012','HUGO','RUIZ FLORES','3889685','HRUIZ@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00013','MARTIZA','PALMA FLORES','3889685','MPALMA@gmail.com');
INSERT INTO TUTOR.PROFESOR VALUES('00014','ROSA','ESPINOZA FLORES','3889685','REZPINOZA@gmail.com');
COMMIT;

--CURSO
INSERT INTO TUTOR.CURSO VALUES('00001','FISICA','00002');
INSERT INTO TUTOR.CURSO VALUES('00002','ALGEBRA','00002');
INSERT INTO TUTOR.CURSO VALUES('00003','GEOMETRIA','00002');
INSERT INTO TUTOR.CURSO VALUES('00004','ARITMETICA','00002');
INSERT INTO TUTOR.CURSO VALUES('00005','COMUNICACION','00002');
INSERT INTO TUTOR.CURSO VALUES('00006','RAZONAMIENTO MATEMATICO','00002');
COMMIT;

--SECCION
INSERT INTO TUTOR.SECCION VALUES('00001','PRIMER GRADO','00001','00001');
INSERT INTO TUTOR.SECCION VALUES('00002','SEGUNDO GRADO','00002','00001');
INSERT INTO TUTOR.SECCION VALUES('00003','TERCER GRADO','00003','00001');
INSERT INTO TUTOR.SECCION VALUES('00004','CUARTO GRADO','00004','00001');
INSERT INTO TUTOR.SECCION VALUES('00005','QUINTO GRADO','00005','00001');
INSERT INTO TUTOR.SECCION VALUES('00006','SEXTO GRADO','00006','00001');
INSERT INTO TUTOR.SECCION VALUES('00007','PRIMERO SECUNDARIA','00007','00002');
INSERT INTO TUTOR.SECCION VALUES('00008','SEGUNDO SECUNDARIA','00008','00002');
INSERT INTO TUTOR.SECCION VALUES('00009','TERCERO SECUNDARIA','00009','00002');
INSERT INTO TUTOR.SECCION VALUES('00010','CUARTO SECUNDARIA','00010','00002');
INSERT INTO TUTOR.SECCION VALUES('00011','QUINTO SECUNDARIA','00011','00002');
COMMIT;


--ALUMNO
INSERT INTO TUTOR.ALUMNO VALUES('00001','FEMENINO','MARIA	','APELLIDO','CALLE C /-SAN BORJA ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN BORJA ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00002','FEMENINO','LUPITA  ','APELLIDO','CALLE A /-SAN BORJA ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN BORJA ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00003','FEMENINO','EMILIA  ','APELLIDO','CALLE B /-SAN BORJA ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN BORJA ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00004','FEMENINO','ADRIANA ','APELLIDO','CALLE 1 /-SAN LUIS  ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN LUIS	 ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00005','FEMENINO','YULISA  ','APELLIDO','CALLE 2 /-SAN LUIS  ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN LUIS	 ','APODERADO@GMAIL.COM','00002');
INSERT INTO TUTOR.ALUMNO VALUES('00006','FEMENINO','ROCIO	','APELLIDO','CALLE 3 /-SAN LUIS  ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN LUIS	 ','APODERADO@GMAIL.COM','00002');
INSERT INTO TUTOR.ALUMNO VALUES('00007','FEMENINO','JULIA   ','APELLIDO','CALLE 5 /-SAN LUIS  ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN LUIS	 ','APODERADO@GMAIL.COM','00002');
INSERT INTO TUTOR.ALUMNO VALUES('00008','MASCULINO','JESUS  ','APELLIDO','CALLE 7 /-SAN LUIS  ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SAN LUIS	 ','APODERADO@GMAIL.COM','00002');
INSERT INTO TUTOR.ALUMNO VALUES('00009','MASCULINO','JOAQUIN','APELLIDO','CALLE X /-SURCO	   ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SURCO	 ','APODERADO@GMAIL.COM','00002');
INSERT INTO TUTOR.ALUMNO VALUES('00010','MASCULINO','OCTAVIO','APELLIDO','CALLE Z /-SURCO	   ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SURCO	 ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00011','MASCULINO','DIEGO  ','APELLIDO','CALLE D /-SURCO	   ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SURCO	 ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00012','MASCULINO','DIEGO  ','APELLIDO','CALLE H /-SURCO	   ',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','SURCO	 ','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00013','MASCULINO','DULIO  ','APELLIDO','CALLE 1 /-MIRAFLORES',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','MIRAFLORES','APODERADO@GMAIL.COM','00001');
INSERT INTO TUTOR.ALUMNO VALUES('00014','MASCULINO','RAFAEL ','APELLIDO','CALLE 2 /-MIRAFLORES',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','MIRAFLORES','APODERADO@GMAIL.COM','00002');
INSERT INTO TUTOR.ALUMNO VALUES('00015','MASCULINO','JOSE   ','APELLIDO','CALLE 3 /-MIRAFLORES',TO_DATE('01/05/2000','DD/MM/YYYY'),'5555555','MIRAFLORES','APODERADO@GMAIL.COM','00002');
COMMIT;


SELECT * FROM TUTOR.SECCION;
INSERT INTO TUTOR.PLANRECUPERACION VALUES('00001', '00001', '00001', '001','00002','xx', 1, 1, TO_DATE(sysdate,'DD/MM/YYYY HH:MI:SS'));
SELECT * FROM TUTOR.PLANRECUPERACION;
SELECT * FROM TUTOR.profesor;
SELECT * FROM TUTOR.TRABAJO WHERE COD_TRABAJO = '00001';


INSERT INTO TUTOR.TRABAJO VALUES('00001', '00001', 0, 'ssss', '00001', '00001', '00001', '001', TO_DATE(sysdate,'DD/MM/YYYY HH:MI:SS'));
